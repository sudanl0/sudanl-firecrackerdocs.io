<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The Firecracker vsock device aims to provide full virtio-vsock support to software running inside the guest VM, while bypassing vhost kernel code on the host. To that end, Firecracker implements the virtio-vsock device model, and mediates communication between AF_UNIX sockets (on the host end) and AF_VSOCK sockets (on the guest end)."><title>vmm::devices::virtio::vsock - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="vmm" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../../vmm/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../../vmm/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module vsock</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">vmm</a>::<wbr><a href="../../index.html">devices</a>::<wbr><a href="../index.html">virtio</a>::<wbr><a class="mod" href="#">vsock</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../../src/vmm/devices/virtio/vsock/mod.rs.html#8-187">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The Firecracker vsock device aims to provide full virtio-vsock support to
software running inside the guest VM, while bypassing vhost kernel code on the
host. To that end, Firecracker implements the virtio-vsock device model, and
mediates communication between AF_UNIX sockets (on the host end) and AF_VSOCK
sockets (on the guest end).</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="metrics/index.html" title="mod vmm::devices::virtio::vsock::metrics">metrics</a></div><div class="desc docblock-short">Defines the metrics system for vsock devices.</div></li><li><div class="item-name"><a class="mod" href="persist/index.html" title="mod vmm::devices::virtio::vsock::persist">persist</a></div><div class="desc docblock-short">Defines state and support structures for persisting Vsock devices and backends.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Vsock.html" title="struct vmm::devices::virtio::vsock::Vsock">Vsock</a></div><div class="desc docblock-short">Structure representing the vsock device.</div></li><li><div class="item-name"><a class="struct" href="struct.VsockUnixBackend.html" title="struct vmm::devices::virtio::vsock::VsockUnixBackend">VsockUnixBackend</a></div><div class="desc docblock-short">The vsock connection multiplexer.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.VsockError.html" title="enum vmm::devices::virtio::vsock::VsockError">VsockError</a></div><div class="desc docblock-short">Vsock device related errors.</div></li><li><div class="item-name"><a class="enum" href="enum.VsockUnixBackendError.html" title="enum vmm::devices::virtio::vsock::VsockUnixBackendError">VsockUnixBackendError</a></div><div class="desc docblock-short">Vsock backend related errors.</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.TYPE_VSOCK.html" title="constant vmm::devices::virtio::vsock::TYPE_VSOCK">TYPE_VSOCK</a></div><div class="desc docblock-short">Virtio vsock device ID.
Defined in <code>include/uapi/linux/virtio_ids.h</code>.</div></li><li><div class="item-name"><a class="constant" href="constant.VSOCK_DEV_ID.html" title="constant vmm::devices::virtio::vsock::VSOCK_DEV_ID">VSOCK_DEV_ID</a></div><div class="desc docblock-short">Device ID used in MMIO device identification.
Because Vsock is unique per-vm, this ID can be hardcoded.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.VsockBackend.html" title="trait vmm::devices::virtio::vsock::VsockBackend">VsockBackend</a></div><div class="desc docblock-short">The vsock backend, which is basically an epoll-event-driven vsock channel.
Currently, the only implementation we have is <code>crate::devices::virtio::unix::muxer::VsockMuxer</code>,
which translates guest-side vsock connections to host-side Unix domain socket connections.</div></li><li><div class="item-name"><a class="trait" href="trait.VsockChannel.html" title="trait vmm::devices::virtio::vsock::VsockChannel">VsockChannel</a></div><div class="desc docblock-short">Any channel that handles vsock packet traffic: sending and receiving packets. Since we’re
implementing the device model here, our responsibility is to always process the sending of
packets (i.e. the TX queue). So, any locally generated data, addressed to the driver (e.g.
a connection response or RST), will have to be queued, until we get to processing the RX queue.</div></li><li><div class="item-name"><a class="trait" href="trait.VsockEpollListener.html" title="trait vmm::devices::virtio::vsock::VsockEpollListener">VsockEpollListener</a></div><div class="desc docblock-short">A passive, event-driven object, that needs to be notified whenever an epoll-able event occurs.
An event-polling control loop will use <code>as_raw_fd()</code> and <code>get_polled_evset()</code> to query
the listener for the file descriptor and the set of events it’s interested in. When such an
event occurs, the control loop will route the event to the listener via <code>notify()</code>.</div></li></ul></section></div></main></body></html>